{
  "entities": {
    "Provider": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Provider",
      "type": "object",
      "description": "Represents a local service provider (artisan).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the provider."
        },
        "name": {
          "type": "string",
          "description": "Name of the service provider (e.g., Kwame Electric Works)."
        },
        "category": {
          "type": "string",
          "description": "Category of service provided (e.g., Electrician, Plumber).",
          "format": "category"
        },
        "phone": {
          "type": "string",
          "description": "Phone number of the service provider."
        },
        "whatsapp": {
          "type": "string",
          "description": "WhatsApp number of the service provider."
        },
        "area": {
          "type": "string",
          "description": "Area or neighborhood where the provider is located (e.g., Berekum Zongo)."
        },
        "verified": {
          "type": "boolean",
          "description": "Indicates if the provider has been verified by the platform."
        },
        "rating": {
          "type": "number",
          "description": "Average rating of the provider (e.g., 4.5)."
        },
        "reviewCount": {
          "type": "number",
          "description": "Number of reviews the provider has received."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the provider was added to the platform.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "category",
        "phone",
        "whatsapp",
        "area",
        "verified",
        "rating",
        "reviewCount",
        "createdAt"
      ]
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a review for a service provider.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the review."
        },
        "providerId": {
          "type": "string",
          "description": "Reference to Provider. (Relationship: Provider 1:N Review)"
        },
        "userName": {
          "type": "string",
          "description": "Name of the user who wrote the review."
        },
        "rating": {
          "type": "number",
          "description": "Rating given by the user (e.g., 5)."
        },
        "comment": {
          "type": "string",
          "description": "Text comment provided by the user."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp of when the review was created.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "providerId",
        "userName",
        "rating",
        "comment",
        "createdAt"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category of service providers.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the category."
        },
        "name": {
          "type": "string",
          "description": "Name of the category (e.g., Plumber, Electrician)."
        },
        "icon": {
          "type": "string",
          "description": "Icon representing the category (e.g., ðŸš¿)."
        }
      },
      "required": [
        "id",
        "name",
        "icon"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/providers/{providerId}",
        "definition": {
          "entityName": "Provider",
          "schema": {
            "$ref": "#/backend/entities/Provider"
          },
          "description": "Stores information about local service providers (artisans).",
          "params": [
            {
              "name": "providerId",
              "description": "Unique identifier for the provider."
            }
          ]
        }
      },
      {
        "path": "/reviews/{reviewId}",
        "definition": {
          "entityName": "Review",
          "schema": {
            "$ref": "#/backend/entities/Review"
          },
          "description": "Stores reviews for service providers.",
          "params": [
            {
              "name": "reviewId",
              "description": "Unique identifier for the review."
            }
          ]
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores categories of service providers.",
          "params": [
            {
              "name": "categoryId",
              "description": "Unique identifier for the category."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the FixAm Ghana application, focusing on listing local artisans, enabling contact, displaying location, and managing ratings and reviews. It prioritizes simplicity and ease of maintenance for the MVP.\n\n*   **Providers:** Stores the core information about each service provider (artisan). No specific authorization requirements beyond the general need to prevent malicious data manipulation, so access is managed at the rule level.\n*   **Reviews:** Stores reviews for each provider. Reviews are tied to a specific `providerId`. Like `providers`, authorization is managed at the rule level.\n*   **Categories:** Stores the list of service categories.\n\nThis structure facilitates Authorization Independence by avoiding complex hierarchical dependencies. Security rules can be written to validate data and control access based on user roles (if implemented later) or data properties without relying on `get()` calls to parent documents.\n\nThe segregation helps to keep access rules simple. The structure also supports QAPs, especially listing providers by category and area, without the need for filtering within the rules.\n"
  }
}