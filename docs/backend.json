{
  "entities": {
    "Provider": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Provider",
      "type": "object",
      "description": "Represents a local service provider (artisan).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the provider entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the service provider (e.g., Kwame Electric Works)."
        },
        "category": {
          "type": "string",
          "description": "The category of service the provider offers (e.g., Electrician)."
        },
        "phone": {
          "type": "string",
          "description": "The provider's phone number."
        },
        "whatsapp": {
          "type": "string",
          "description": "The provider's WhatsApp number."
        },
        "area": {
          "type": "string",
          "description": "The area/neighborhood where the provider is located (e.g., Berekum Zongo)."
        },
        "verified": {
          "type": "boolean",
          "description": "Indicates whether the provider has been verified by the platform."
        },
        "rating": {
          "type": "number",
          "description": "The average rating of the provider (e.g., 4.5).",
          "format": "float"
        },
        "reviewCount": {
          "type": "number",
          "description": "The number of reviews the provider has received."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the provider was added to the platform.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "name",
        "category",
        "phone",
        "area",
        "verified",
        "rating",
        "reviewCount",
        "createdAt"
      ]
    },
    "Review": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Review",
      "type": "object",
      "description": "Represents a review for a service provider.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the review entity."
        },
        "providerId": {
          "type": "string",
          "description": "Reference to Provider. (Relationship: Provider 1:N Review)"
        },
        "userName": {
          "type": "string",
          "description": "The name of the user who wrote the review."
        },
        "rating": {
          "type": "number",
          "description": "The star rating given by the user (e.g., 5)."
        },
        "comment": {
          "type": "string",
          "description": "The user's written review."
        },
        "createdAt": {
          "type": "string",
          "description": "Timestamp indicating when the review was submitted.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "providerId",
        "userName",
        "rating",
        "comment",
        "createdAt"
      ]
    },
    "Category": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Category",
      "type": "object",
      "description": "Represents a category of service providers (e.g., Plumber, Electrician).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the category entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the category (e.g., Plumber)."
        },
        "icon": {
          "type": "string",
          "description": "An icon representing the category (e.g., ðŸš¿)."
        }
      },
      "required": [
        "id",
        "name",
        "icon"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/providers/{providerId}",
        "definition": {
          "entityName": "Provider",
          "schema": {
            "$ref": "#/backend/entities/Provider"
          },
          "description": "Stores information about service providers (artisans).",
          "params": [
            {
              "name": "providerId",
              "description": "The unique identifier of the provider."
            }
          ]
        }
      },
      {
        "path": "/providers/{providerId}/reviews/{reviewId}",
        "definition": {
          "entityName": "Review",
          "schema": {
            "$ref": "#/backend/entities/Review"
          },
          "description": "Stores reviews for individual service providers. Includes denormalized `providerId` for relationship.",
          "params": [
            {
              "name": "providerId",
              "description": "The unique identifier of the provider."
            },
            {
              "name": "reviewId",
              "description": "The unique identifier of the review."
            }
          ]
        }
      },
      {
        "path": "/categories/{categoryId}",
        "definition": {
          "entityName": "Category",
          "schema": {
            "$ref": "#/backend/entities/Category"
          },
          "description": "Stores categories for service providers.",
          "params": [
            {
              "name": "categoryId",
              "description": "The unique identifier of the category."
            }
          ]
        }
      }
    ],
    "reasoning": "The Firestore structure is designed to support the FixAm Ghana application, focusing on listing local artisans, enabling contact, displaying location, and managing ratings and reviews. It prioritizes simplicity and scalability for an MVP.  \n\n**Authorization Independence (CRITICAL):** There's no explicit authorization beyond potential admin roles, so authorization independence isn't a primary concern at this stage. However, if provider verification becomes permissioned, the `providers` documents could include denormalized admin role data (e.g., an `adminApproverId`) to avoid `get()` calls in security rules.  For example, `providers/{providerId}` would include `adminApproverId: String`. If approval from any admin is ok, a `approved:boolean` flag is sufficient. This approach becomes critical as the application scales and more granular access control is required.\n\n**Clarity of Intent (Debuggability):** The structure uses clear and descriptive collection and field names to enhance debuggability.  Relationships between entities (e.g., Providers and Reviews) are maintained through `providerId` fields, providing a straightforward way to query related data.\n\n**DBAC (No Custom Claims):** The application does not explicitly require role-based access control beyond the potential admin verification, so custom claims are not necessary at this stage.\n\n**QAPs (Rules are not Filters):** The structure is designed to support secure `list` operations by segregating data into collections with homogeneous security postures. For example, all documents in the `providers` collection share the same access requirements. As the application evolves, consider segregating verified and unverified providers into separate collections to enforce different security rules during listing.\n\n**Invariants:** The structure supports data integrity by enforcing required fields in the schema and using timestamps for creation dates. Denormalization of data (if admin roles are added) will require careful management to maintain consistency."
  }
}