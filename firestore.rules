rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    /* ============================
       PROVIDERS
    ============================ */
    match /providers/{providerId} {
      // Anyone can read approved providers
      allow read: if resource.data.status == 'approved';

      // No client-side writes allowed
      allow write: if false;
    }

    /* ============================
       SERVICES (Public catalog)
    ============================ */
    match /services/{serviceId} {
      allow read: if true;
      allow write: if false;
    }

    /* ============================
       JOBS
    ============================ */
    match /jobs/{jobId} {
      // Only authenticated users can read their own jobs (if you later add ownerId)
      allow read: if request.auth != null;
      allow write: if false;
    }

    /* ============================
       AUDIT LOGS (SERVER ONLY)
    ============================ */
    match /audit_logs/{logId} {
      allow read, write: if false;
    }

    /* ============================
       DEFAULT DENY
    ============================ */
    match /{document=**} {
      allow read, write: if false;
    }
  }
}